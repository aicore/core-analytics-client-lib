{"version":3,"sourceRoot":"src/analytics.js","sources":["src/analytics.js"],"names":["initAnalyticsSession","accountIDInit","appNameInit","analyticsURLInit","postIntervalSecondsInit","granularitySecInit","let","accountID","appName","userID","sessionID","postIntervalSeconds","granularitySec","analyticsURL","postURL","serverConfig","USERID_LOCAL_STORAGE_KEY","SESSION_ID_LOCAL_STORAGE_KEY","POST_LARGE_DATA_THRESHOLD_BYTES","currentAnalyticsEvent","postIntervalSecondsInitial","granularitySecInitial","eventData","IS_NODE_ENV","window","DEFAULT_BASE_URL","granularityTimer","postTimer","currentQuantisedTime","disabled","debugLog","args","analytics","debugMode","console","log","debugError","error","Error","_createAnalyticsEvent","schemaVersion","uuid","unixTimestampUTC","Date","numEventsTotal","events","_validateCurrentState","_retryPost","eventToSend","backoffCount","setTimeout","_postCurrentAnalyticsEvent","DEFAULT_RETRY_TIME_IN_SECONDS","_postEventWithRetry","textToSend","JSON","stringify","length","warn","debugInfo","info","navigator","onLine","fetch","method","headers","Content-Type","body","then","res","status","catch","_resetGranularityTimer","disable","clearInterval","setInterval","_setupTimers","event","eventType","eventCategory","subCategory","eventCount","eventValue","_validateEvent","category","count","value","time","valueCount","eventItem","timeArray","push","modificationIndex","index","newValue","storedValueIsCount","newValueCount","storedValueObject","toString","replace","localUserID","localStorage","getItem","crypto","randomUUID","setItem","localSessionID","sessionStorage","Math","random","substr","Promise","configURL","json","serverResponse","resolve","err","updatedServerConfig","_initData","_getCurrentAnalyticsEvent","parse","_getAppConfig","countEvent","valueEvent","c","getRandomValues","Uint8Array"],"mappings":"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"}